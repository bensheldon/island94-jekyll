<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script>
    let theme = localStorage.getItem('theme');
    if (!["light", "dark"].includes(theme)) {
      theme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    document.documentElement.setAttribute('data-bs-theme', theme);
  </script>

  <link rel="stylesheet" href="/assets/stylesheets/main.css">
  <script src="/assets/javascripts/main.js"></script>

  <title>Island94.org</title>
  <meta name="description" content="A Lost and Found
">

  <link rel="canonical" href="https://island94.org/page/8/">

  <link rel="alternate" type="application/rss+xml" title="Island94.org Posts" href="https://island94.org/feed.xml">
  <link rel="alternate" type="application/rss+xml" title="Island94.org Book Reviews" href="https://island94.org/books.xml">

  
    <meta name="robots" content="noindex, follow">
  
</head>


  <body>

    <nav class="navbar navbar-expand-lg navbar-light mb-2 flex-column">
  <div class="container">
    <a class="navbar-brand" href="/">Island94.org</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link " href="/about/">About</a></li>
        <li class="nav-item"><a class="nav-link " href="/archives/">Archives</a></li>
        <li class="nav-item"><a class="nav-link " href="/books/">Books</a></li>
        <li class="nav-item"><a class="nav-link " href="/tags/">Tags</a></li>
        <li class="nav-item"><a class="nav-link" href="/feed.xml">RSS Feed <i class="bi bi-rss-fill"></i></a></li>

        <li class="nav-item py-2 py-lg-1 col-12 col-lg-auto">
          <div class="vr d-none d-lg-flex h-100 mx-lg-2 text-light-500"></div>
          <hr class="d-lg-none my-0 text-light-500">
        </li>

        <li class="nav-item dropdown">
          <button id="bs-theme" class="btn btn-link nav-link dropdown-toggle" type="button" aria-expanded="false" data-bs-toggle="dropdown"  aria-label="Theme (Auto)">
            <i data-bs-theme-active-icon class="bi bi-circle-half"></i>
            <span data-bs-theme-label>Theme</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bs-theme-text">
            <li>
              <button type="button" class="dropdown-item" data-bs-theme-value="light" aria-pressed="false">
                <i class="bi bi-sun"></i> Light
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item" data-bs-theme-value="dark" aria-pressed="false">
                <i class="bi bi-moon-stars-fill"></i> Dark
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item" data-bs-theme-value="auto" aria-pressed="true">
                <i class="bi bi-circle-half"></i> Auto
              </button>
            </li>
          </ul>
        </li>

      </ul>

      <form id="search" class="d-flex" action="/search" method="get">
        <input id="search-box" class="form-control search" role="search" name="q" placeholder="Search" aria-label="Search" results="0" type="text">
        <button class="visually-hidden" type="submit">Search</button>
      </form>
    </div>
  </div>
  <div class="container">
    <div class="text-muted fst-italic">
      — Ben Sheldon's personal blog and <a href="/2012/04/A-Commonplace-Book.html">commonplace book</a>.
    </div>
  </div>
</nav>


    <div class="container container-body">
      <div class="home">
  
    

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    
      <li class="page-item"><a href="/page/7/" class="page-link"><span aria-hidden="true">&larr; </span>Newer</a></li>
    

    <li class="page-item disabled"><span class="page-link">Page 8 of 68</span></li>

    
      <li class="page-item"><a href="/page/9/" class="page-link">Older<span aria-hidden="true"> &rarr;</span></a></li>
    
  </ul>
</nav>


<hr>


  

  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2022/02/til-activerecord-transactions-roll-back-on-ruby-thread-abort"><p>TIL: ActiveRecord transactions roll back on Ruby Thread abort</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2022-02-08T03:54:00+00:00" itemprop="datePublished">February 8, 2022</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I learned that ActiveRecord would roll back transactions when inside an aborted thread. It’s implemented right here, in ActiveRecord’s <a href="https://github.com/rails/rails/blob/3f13828392a4aea81184fa873c47cb2e53d295e9/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb#L336-L342">connection_adapters/abstract/transaction.rb</a>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">within_new_transaction</span>
  <span class="c1"># ...</span>
<span class="k">ensure</span>
  <span class="c1"># ...</span>
  <span class="k">elsif</span> <span class="no">Thread</span><span class="p">.</span><span class="nf">current</span><span class="p">.</span><span class="nf">status</span> <span class="o">==</span> <span class="s2">"aborting"</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="n">completed</span> <span class="o">&amp;&amp;</span> <span class="n">transaction</span><span class="p">.</span><span class="nf">written</span><span class="p">)</span>
    <span class="c1"># The transaction is still open but the block returned earlier.</span>
    <span class="c1">#</span>
    <span class="c1"># The block could return early because of a timeout or because the thread is aborting,</span>
    <span class="c1"># so we are rolling back to make sure the timeout didn't caused the transaction to be</span>
    <span class="c1"># committed incompletely.</span>
    <span class="n">rollback_transaction</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre></div></div>

<p>How did I end up here? I recently implemented a feature in GoodJob to track active processes in the database using ActiveRecord. These database queries occur in a background thread where I also use the same database connection for GoodJob’s Postgres LISTENing. It looks something like this (pseudocode):</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Concurrent</span><span class="o">::</span><span class="no">Future</span><span class="p">.</span><span class="nf">execute</span> <span class="k">do</span>
  <span class="n">process</span> <span class="o">=</span> <span class="no">Process</span><span class="p">.</span><span class="nf">create</span>
  <span class="kp">loop</span> <span class="p">{</span> <span class="n">listen_for_notify</span> <span class="p">}</span>
<span class="k">ensure</span>
  <span class="n">process</span><span class="o">&amp;</span><span class="p">.</span><span class="nf">destroy!</span>
<span class="k">end</span>
</code></pre></div></div>

<p>While working on one of my Rails projects that use GoodJob (https://dayoftheshirt.com), I noticed that Process records were not cleaned up as I expected running when GoodJob async inside of Rails Server/Puma locally and exiting. Inspecting the logs, I saw this:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TRANSACTION (0.1ms)  BEGIN
GoodJob::Process Destroy (0.3ms)  DELETE FROM "good_job_processes" WHERE "good_job_processes"."id" = $1  [["id", "320de861-4c84-4f8c-ba3e-2e08a8ef0469"]]
TRANSACTION (0.1ms)  ROLLBACK
</code></pre></div></div>

<p>Huh. I did some Googling and found some <a href="https://github.com/rails/rails/pull/40704#discussion_r532007113">references to rollback behavior</a>, and asked in the Rails Link Slack, but nobody knew. This caused me to dig in ActiveRecord, where I found the behavior implemented.</p>

<p>I was still confused because I had never seen this behavior in GoodJob when building out the feature. But after much head-scratching, I realized that I hadn’t followed <a href="https://github.com/bensheldon/good_job#execute-jobs-async--in-process">GoodJob’s README instructions for integrating with Puma</a>, which ensures that GoodJob is gracefully shutdown before Ruby aborts threads at exit:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/puma.rb</span>

<span class="n">on_worker_shutdown</span> <span class="k">do</span>
  <span class="no">GoodJob</span><span class="p">.</span><span class="nf">shutdown</span>
<span class="k">end</span>

<span class="no">MAIN_PID</span> <span class="o">=</span> <span class="no">Process</span><span class="p">.</span><span class="nf">pid</span>
<span class="nb">at_exit</span> <span class="k">do</span>
  <span class="no">GoodJob</span><span class="p">.</span><span class="nf">shutdown</span> <span class="k">if</span> <span class="no">Process</span><span class="p">.</span><span class="nf">pid</span> <span class="o">==</span> <span class="no">MAIN_PID</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Mystery solved.</p>

  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2022/01/javascript-is-a-management-problem"><p>Javascript is a management problem</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2022-01-11T19:17:00+00:00" itemprop="datePublished">January 11, 2022</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I have been on board with low/no javascript for a long time for a variety of observed and experienced reasons, and grasping around for a succinct explanation. Baldur Bjarnason captures it in <a href="https://www.baldurbjarnason.com/2021/single-page-app-morality-play/">“The Single-Page-App Morality Play”</a>:</p>

<blockquote>

  <p><em>The problem is management.</em></p>

  <p>It is a management problem. Truly.</p>

  <p>The Multi-Page-App forces the team to narrow the scope to a level they can handle. It puts a hard limit on their technological aspirations. Mandating a traditional Multi-Page-App under the auspices of performance, accessibility, or Search-Engine-Optimisation is a face-saving way to force the hand of management to be more realistic about what their teams can accomplish. When we can accomplish the same by advocating for a specific Single-Page-App toolkit or framework, that’s what most of us nominally on the ‘Anti’ side do. I regularly advocate for Svelte when I think the team can handle its long term implications in terms of complexity. (That might change as Svelte adds more features.)</p>

  <p>The problem with Single-Page-App frameworks, even the ones like SvelteKit who could claim to be more Hybrid than just SPA, is that they are very, very eager to enable ‘scale’ of any sort. Features, app size, code complexity, integrations, etc. They are desperate to make sure that you can keep using their framework if you become a mythical ‘unicorn’ startup and your project grows into the next Facebook. So they put a lot of hard work into making sure that there is no upper limit to the scope of the app you can make with them.</p>

  <p>Which, when they present it as ‘scale’, sounds like a good thing. But it’s absolutely a bad thing when you’re in an industry that’s as mismanaged as ours. We can’t handle complexity. Having no upper limit to it is extremely bad.</p>

</blockquote>

  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/12/i'm-burning-dude-where-do-we-go-from-here"><p>I’m burning dude… where do we go from here?</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-12-10T01:41:00+00:00" itemprop="datePublished">December 10, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>A powerful conversation from Reveal’s <a href="https://revealnews.org/podcast/mississippi-goddam-chapter-6-mississippi-justice/">“Mississippi Goddam Chapter 6: Mississippi Justice” (46:10)</a> between reporters Al Letson and Jonathan Jones:</p>

<blockquote>

  <p><strong>Al Letson</strong></p>

  <p>After the interview, I was still thinking about everything Curley said. JJ and I walked back to our car mostly in silence, but on the ride back, we talked about it.</p>

  <p>Okay, so, what did you think about the interview with Curley?</p>

  <p><strong>Jonathan Jones</strong></p>

  <p>It was good. It was slightly pessimistic at the end of it.</p>

  <p><strong>Al Letson</strong></p>

  <p>That’s kind of what I wanted to talk to you about though, is that like, I am just really tired of people asking Black folks to have hope, and to make people feel better about the American situation, when everything in our history tells us that that is not the case. And I especially am uncomfortable with it when we are asking people who are doing the work, like Curley Clark is out there doing the work to try to make this world a more just place. And I, in the work that I choose to do, I’m trying to make the world a better place in it. And in the work that you do, it’s the same reason. We’re both driven to the work that we do and the cases that we look at and pick, because we want this place to be more just for everybody. And so, but the idea that somehow or another, Black folks are supposed to have hope, and Black folks are not supposed to be pessimistic. It just feels yucky to me, because it’s like asking us to look at all the history of what’s happened in this country and kind of ignore it.</p>

  <p><strong>Jonathan Jones</strong></p>

  <p>No, but I don’t disagree with you. I think that’s a misunderstanding of what I was asking. I wasn’t fishing for Black folk to fight.</p>

  <p><strong>Al Letson</strong></p>

  <p>No, I don’t think you were. That’s not what I’m saying. I’m not saying that you were telling me…</p>

  <p><strong>Jonathan Jones</strong></p>

  <p>Well, let me just… I mean, I am thinking about, I want to inspire. I want to… I don’t want to be an activist, but I hope our journalism helps to make this better world. And in investigative reporting, we do a great job of finding bad guys. We don’t do a very good job about solutions.</p>

  <p><strong>Al Letson</strong></p>

  <p>I think we look at it in two different ways, in the sense of, we’re both shooting for the same goal. And I want to be really clear that I didn’t think that you were telling Curley Clark to work harder. I felt like you were asking Curley, and by extension me, why don’t we have hope, and where’s the hope? And my point is that the history of this country tells me, no, no, I can’t do that anymore.</p>

  <p>And I would say that, I think it’s beautiful that you want to inspire people. I do. I love that about you. And in certain ways, I do want to do work that inspires people, but really at this point in my life and where I am, I don’t want to inspire people, I want to infuriate people. I want to make work that make people burn so hard that they feel like this injustice is wrong, and they want to go out, and they want to tear it all down.</p>

  <p>And I know that we’re talking about the same thing, but we’re talking about it in different ways, right? I know that you want to do the exact same thing, that you want to inspire people for this, to this higher cause. And I think that that is useful and smart, but also, I think, just like in series that we’re working on, I couldn’t do this without you, and you couldn’t do this without me, and the inspiration is definitely necessary, but fuck, man, I got so much anger.</p>

  <p>I got so much anger, and I’m so tired of hiding it, and I’m so tired of pretending that it’s not there, and I’m so tired of this idea that… This shit really chokes me up a little bit. I’m just, I’m sick of it, man. I’m sick of it, And it makes… I want to… I’m burning, dude. And that’s why I’m doing this work, is because I’m seeing how the world is, and it’s not just Mississippi. It’s all, it’s the entire country. You see how it’s happening, and I don’t have hope, but what I do have is this rage, and it’s burning in me. And that’s what I hope that we do. I hope that we people off so bad at that they create change from that fire.</p>

  <p><strong>Jonathan Jones</strong></p>

  <p>And that seems very real, and I completely affirm that. I think maybe I would have, maybe I should have phrased the question a little bit better, because that answer that you gave would have been the answer. I guess my point was, where do we go from here? It can be from anger and raw rage, and outrage at injustice. It’s just, where do we go from here? And I don’t want to have a… I’m not trying to do a hokey fairytale at all.</p>

  <p><strong>Al Letson</strong></p>

  <p>Right, right.</p>

  <p><strong>Jonathan Jones</strong></p>

  <p>And it’s… it’s hard.</p>

</blockquote>

  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/11/types-of-corruption"><p>Types of Corruption</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-11-21T22:33:00+00:00" itemprop="datePublished">November 21, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>An interesting breakdown of types of corruption by <a href="https://freakonomics.com/podcast/chinas-gilded-age/">Yuen Yuen Ang on Freakonomics</a>:</p>

<blockquote>

  <p>I propose a typology of four types of corruption divided along two dimensions. First, whether the corruption involves elites or non-elites. And second, whether the corruption involves theft or exchange. So this intersection creates, first of all, corruption with theft, which I divide into petty theft and grand theft. Petty theft would be like extortion — a police officer who just stops you and robs you of $200. Grand theft would be embezzlement. Nigeria would be a classic case, billions of dollars siphoned out of a country. And then I distinguish between two types of transactional corruption. The first is what I call speed money, which is bribes paid to low- or medium-level officials in order to overcome red tape or delays or harassment. And then I have a fourth category called access money, which is privileges paid to powerful officials, not because you want to overcome red tape, but because you want to buy special deals from them.</p>

  <p>[…]</p>

  <p>I use the analogy of drugs because we know that all drugs are harmful, but they harm in different ways. Petty theft and grand theft are like toxic drugs, where if you take this drug, it’s definitely going to damage your health, you get no benefit from it… Speed money are like painkillers, so they help you to relieve a headache by overcoming red tape, but they don’t help you grow muscles fast. They don’t help you to grow your business. And access money are the steroids of capitalism, and steroids, we know, help you grow muscle fast. They help you perform superhuman feats. But they come with serious side effects that accumulate over time, and they only erupt in the event of a meltdown.</p>

</blockquote>

  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/11/conflict-in-the-matrix"><p>Conflict in the matrix</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-11-06T00:17:00+00:00" itemprop="datePublished">November 6, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>From Apenwarr’s <a href="https://apenwarr.ca/log/20190926">“What do executives do, anyway?”</a>:</p>

<blockquote>

  <p>To paraphrase the book [High Output Management, by Andy Grove], the job of an executive is: to define and enforce culture and values for their whole organization, and to ratify good decisions.</p>

  <p>That’s all.</p>

  <p>Not to decide. Not to break ties. Not to set strategy. Not to be the expert on every, or any topic. Just to sit in the room while the right people make good decisions in alignment with their values. And if they do, to endorse it. And if they don’t, to send them back to try again.</p>

  <p>There’s even an algorithm for this.</p>

  <p>It seems too easy to be real. For any disagreement, identify the lead person on each side. Then, identify the lowest executive in the corporate hierarchy that both leads report into (in the extreme case, this is the CEO). Set up a meeting between the three of them. At the meeting, the two leads will present the one, correct decision that they have agreed upon. The executive will sit there, listen, and ratify it.</p>

  <p>But… wait. If the decision is already made before the meeting, why do we need the meeting? Because the right decision might not happen without the existence of that meeting. The executive gives formal weight to a major decision. The executive holds the two disagreeing leads responsible: they must figure out not what’s best for them, but what’s best for the company. They can’t pull rank. They can’t cheat. They have to present their answer to a person who cares about both of their groups equally. And they want to look good, because that person is their boss! This puts a lot of pressure on people to do the right thing.</p>

</blockquote>

<p>From HBR’s <a href="https://hbr.org/1978/05/problems-of-matrix-organizations">“Problems of Matrix Organizations”</a>:</p>

<blockquote>

  <p>Another possible source of decision strangulation in matrix organizations occurs when managers frequently or constantly refer decisions up the dual chain of command. Seeing that one advantage of the conventional single chain of command is that two disagreeing peers can go to their shared boss for a resolution, managers unfamiliar with the matrix worry about this problem almost more than any other. They look at a matrix and realize that the nearest shared boss might be the CEO, who could be five or six echelons up. They realize that not too many problems can be pushed up to the CEO for resolution without creating the ultimate in information overload. So, they think, will not the inevitable disagreement lead to a tremendous pileup of unresolved conflict?</p>

  <p>Certainly, this can happen in a malfunctioning matrix. Whether it does happen depends primarily on the depth of understanding that exists about required matrix behavior on the part of managers in the dual structure. Let us envision the following scene: a manager with two bosses gets sharply conflicting instructions from his product and his functional bosses. When he tries to reconcile his instructions without success, he quite properly asks for a session with his two bosses to resolve the matter. The three people meet, but the discussion bogs down, no resolution is reached, and neither boss gives way.</p>

  <p>The two bosses then appeal the problem up a level to their respective superiors in each of the two chains of command. This is the critical step. If the two superiors properly understand matrix behavior, they will first ascertain whether the dispute reflects an unresolved broader policy issue. If it does not, they know their proper step is to teach their subordinates to resolve the problem themselves—not to solve it for them. In short, they would not let the unresolved problem escalate, but would force it back to the proper level for solution, and insist that the solution be found promptly.</p>

  <p>Often, conflict cannot be resolved; it can, however, be managed, which it must be if the matrix is to work. Any other course of action would represent management’s failure to comprehend the essential nature of the design.</p>

</blockquote>

<p>Lastly, <a href="https://komoroske.com/slime-mold/">Alex Komoroske’s deck on Slime Molds</a> is good.</p>

  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/10/behaving-like-the-character-in-a-story"><p>Behaving like the character in a story</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-10-11T19:14:00+00:00" itemprop="datePublished">October 11, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I enjoyed reading Robert Kolker’s <a href="https://www.nytimes.com/2021/10/05/magazine/dorland-v-larson.html">“Who Is the Bad Art Friend?”</a>, specifically about the non-symmetric relationships of fiction and inspiration.</p>

<blockquote>
  <p>Larson’s biggest frustration with Dorland’s accusations was that they stole attention away from everything she’d been trying to accomplish with this story. “You haven’t asked me one question about the source of inspiration in my story that has to do with alcoholism, that has to do with the Chinese American experience. It’s extremely selective and untrue to pin a source of a story on just one thing. And this is what fiction writers know.” To ask if her story is about Dorland is, Larson argues, not only completely beside the point, but ridiculous. “I have no idea what Dawn is thinking. I don’t, and that’s not my job to know. All I can tell you about is how it prompted my imagination.”</p>

  <p>…</p>

  <p>When Larson discusses “The Kindest” now, the idea that it’s about a kidney donation at all seems almost irrelevant. If that hadn’t formed the story’s pretext, she believes, it would have been something else. “It’s like saying that ‘Moby-Dick’ is a book about whales,” she said. As for owing Dorland a heads-up about the use of that donation, Larson becomes more indignant, stating that no artist has any such responsibility. “If I walk past my neighbor and he’s planting petunias in the garden, and I think, Oh, it would be really interesting to include a character in my story who is planting petunias in the garden, do I have to go inform him because he’s my neighbor, especially if I’m still trying to figure out what it is I want to say in the story? I just couldn’t disagree more.”</p>

  <p>…</p>

  <p>“[Dorland] might behave like the character in my story,” [Larsen] said. “But that doesn’t mean that the character in my story is behaving like [Dorland].”</p>
</blockquote>

<p><a href="https://captainawkward.com/2021/10/11/1351-can-i-use-my-exs-pseudonym-in-my-novel/">Captain Awkward</a> also had memorable advice:</p>

<blockquote>
  <p>Creatively speaking, I think you can generally write whatever you want about whoever you want. You do not owe people flattering portrayals in your fiction and you don’t owe the world a fair hearing of both sides. Even if you’re writing memoir, the expectation is that you’ll write the truth about your own experiences and recollections of events. So, when it’s just you and a blank page that nobody else will see? Name names. Settle scores. Spill some beans. Layer in all the carefully hoarded observations and details you’ve been saving up. You don’t have to solve publishing problems right this second, so feed the fire in your belly with your ex’s pet name for himself if that’s what gets it done; spite is motivating. You can always pull up a name generator later when you need to.</p>

  <p>Ethically speaking, being free to write whatever you want does not mean being free of consequences from what you wrote. If you include recognizable details about real people in your published writing, fictional or otherwise, if you disclose confidential information about them (like mental health diagnoses), assume that somebody will connect the dots, and assume that the people you wrote about will eventually feel some kind of way about it. They may not have grounds to sue you, but they might think you are a bad person or a lazy artist, and they might tell their own stories where you are not the hero.</p>
</blockquote>


  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/10/til-detecting-block-returns-in-ruby"><p>TIL: Detecting block returns in Ruby</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-10-11T19:01:00+00:00" itemprop="datePublished">October 11, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I was doing some research on introspecting Ruby on Rails database transactions for a <a href="https://www.reddit.com/r/ruby/comments/q54515/comment/hg9dzdc/?utm_source=reddit&amp;utm_medium=web2x&amp;context=3">Reddit thread</a>, and came across this <a href="https://github.com/rails/rails/pull/29333">Rails PR</a> that had some new Ruby behavior for me: detecting an early <code class="language-plaintext highlighter-rouge">return</code> from a block.</p>

<p>Some background: A Ruby language feature, that can frequently surprise people, is that using <code class="language-plaintext highlighter-rouge">return</code> within a Ruby block will return not only from the block itself, but also from the block’s caller too. Using <code class="language-plaintext highlighter-rouge">next</code> is really the only truly safe way to interrupt a block early; even <code class="language-plaintext highlighter-rouge">break</code> can be troublesome if the block is called by an enumerator. Also, <code class="language-plaintext highlighter-rouge">next</code> can take a return value too, just like <code class="language-plaintext highlighter-rouge">return</code> e.g. <code class="language-plaintext highlighter-rouge">next my_value</code>.</p>

<p>I found the Rails PR interesting, because it has a method for detecting and warning on an early return. Here’s a simplified example:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="n">block</span><span class="p">.</span><span class="nf">call</span>
  <span class="n">completed</span> <span class="o">=</span> <span class="kp">true</span> <span class="c1"># won't be called if the block returns early</span>
<span class="k">ensure</span>
  <span class="k">if</span> <span class="n">completed</span>
    <span class="nb">puts</span> <span class="s2">"ok"</span>
  <span class="k">else</span>
    <span class="nb">puts</span> <span class="s2">"returned early"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">some_method</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span> <span class="c1"># =&gt; "returned early"</span>
<span class="n">some_method</span> <span class="p">{</span> <span class="k">next</span> <span class="p">}</span> <span class="c1"># =&gt; "ok"</span>
</code></pre></div></div>

<p>This works because the methods <code class="language-plaintext highlighter-rouge">ensure</code> block will always be called, even if <code class="language-plaintext highlighter-rouge">#some_method</code> returns early. That was a novel implementation for me.</p>


  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/09/home-buyer-letter"><p>Home buyer letter</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-09-14T19:02:00+00:00" itemprop="datePublished">September 14, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Having now successfully purchased a home in San Francisco, I have had friends asked me for resources. This was the letter we sent to the seller, which is <em>very</em> SF, but also the energy to bring. I also learned that these letters are waning because they are biased af.</p>

<blockquote>

  <p>Dear [seller],</p>

  <p>Your home at [street address] is the right fit for us, our two cats, and (hopefully) our future family. We love the long layout, high ceilings (we’re both tall) and sunny patio, and look forward to hosting friends for Sunday brunch someday.</p>

  <p>We’re rooted in the city through the South End Rowing Club, St. Francis Lutheran Church, supporting the YMCA, kickstarting local businesses like Andytown coffee, and working at tech companies and nonprofits. Ben worked for three years just around the corner at California and Grant, and Angelina has worked at numerous tech companies around Union Square and SOMA. We love the quiet contrast of Nob Hill against the rest of downtown San Francisco.</p>

  <p>We see SF as a long term home and [street address] as a homebase for work and play: swimming and rowing on the SF Bay, and wine trips up to Napa and Sonoma too. Your home would have the perfect commute for Ben, walking down the hill to his nonprofit job at [organization] where he builds technology to help people apply for food stamps, remove marijuana convictions from criminal records, and improve how government delivers services to those who need them most. And it’s a short walk for Angelina to the [company] Shuttle or Downtown SF [company] office where she does business development for maps and location technology in use around the world.</p>

  <p>Your home would provide the greatest fit for us as we aim to continue to contribute to the fabric of the city, where we hope to raise a family and be active in the community. We aim to take great care of an already-loved property while advocating for a neighborhood that supports all members throughout the growth of our city.</p>

  <p>Our offer is fair given the condition, amenities and comparable sales, and we aim for being the best buyer to steward this home and the neighborhood. We look forward to your consideration of our offer for [street address].</p>

  <p>Sincerely,<br />
Ben and Angelina</p>

</blockquote>

  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/07/goodjob-whats-new-v1.12.0"><p>GoodJob, what’s new: Cron, concurrency controls, and a dashboard demo (v1.12.0)</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-07-27T13:50:00+00:00" itemprop="datePublished">July 27, 2021</time>
      
      


  

  

  • Tagged <a href="/tags/#goodjob">GoodJob</a>


    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>This is a quick roundup of what’s new with GoodJob v1.12.0 since the last update published for <a href="https://island94.org/2021/01/goodjob-1-4-jruby-compatibility-and-more">GoodJob v1.9</a>.</p>

<p>GoodJob ( <a href="https://github.com/bensheldon/good_job">github</a> ) is a multithreaded, Postgres-based, ActiveJob backend for Ruby on Rails. If you’re new to GoodJob, read the  <a href="https://island94.org/2020/07/introducing-goodjob-1-0">introductory blog post</a>.</p>

<p><em>For further details on the following updates, check out GoodJob’s <a href="https://github.com/bensheldon/good_job/blob/main/CHANGELOG.md">Changelog</a> or <a href="https://github.com/bensheldon/good_job/blob/main/README.md">Readme</a>.</em></p>

<h3 id="cron-like-replacement-for-repeatingrecurring-jobs">Cron-like replacement for repeating/recurring jobs</h3>

<p>GoodJob now ships with a <a href="https://github.com/bensheldon/good_job#cron-style-repeatingrecurring-jobs">cron-like replacement for repeating/recurring jobs</a>. The cron-like process runs either via the CLI, or <code class="language-plaintext highlighter-rouge">async</code> within the web server process. Repeating jobs can be scheduled to the second, powered by the <a href="https://github.com/floraison/fugit">Fugit</a> gem. Here’s what the configuration looks like:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># config/environments/application.rb or a specific environment e.g. production.rb</span>

<span class="c1"># Enable cron in this process; e.g. only run on the first Heroku worker process</span>
<span class="n">config</span><span class="p">.</span><span class="nf">good_job</span><span class="p">.</span><span class="nf">enable_cron</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'DYNO'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'worker.1'</span> <span class="c1"># or `true` or via $GOOD_JOB_ENABLE_CRON</span>

<span class="c1"># Configure cron with a hash that has a unique key for each recurring job</span>
<span class="n">config</span><span class="p">.</span><span class="nf">good_job</span><span class="p">.</span><span class="nf">cron</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1"># Every 15 minutes, enqueue `ExampleJob.set(priority: -10).perform_later(52, name: "Alice")`</span>
  <span class="ss">frequent_task: </span><span class="p">{</span> <span class="c1"># each recurring job must have a unique key</span>
    <span class="ss">cron: </span><span class="s2">"*/15 * * * *"</span><span class="p">,</span> <span class="c1"># cron-style scheduling format by fugit gem</span>
    <span class="ss">class: </span><span class="s2">"ExampleJob"</span><span class="p">,</span> <span class="c1"># reference the Job class with a string</span>
    <span class="ss">args: </span><span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="p">{</span> <span class="ss">name: </span><span class="s2">"Alice"</span> <span class="p">}],</span> <span class="c1"># arguments to pass; can also be a proc e.g. `-&gt; { { when: Time.now } }`</span>
    <span class="ss">set: </span><span class="p">{</span> <span class="ss">priority: </span><span class="o">-</span><span class="mi">10</span> <span class="p">},</span> <span class="c1"># additional ActiveJob properties; can also be a lambda/proc e.g. `-&gt; { { priority: [1,2].sample } }`</span>
    <span class="ss">description: </span><span class="s2">"Something helpful"</span><span class="p">,</span> <span class="c1"># optional description that appears in Dashboard (coming soon!)</span>
  <span class="p">},</span>
  <span class="ss">another_task: </span><span class="p">{</span>
    <span class="ss">cron: </span><span class="s2">"0 0,12 * * *"</span><span class="p">,</span>
    <span class="ss">class: </span><span class="s2">"AnotherJob"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="c1"># etc.</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="concurrency-controls">Concurrency controls</h3>

<p>GoodJob now offers an <a href="https://github.com/bensheldon/good_job#activejob-concurrency">ActiveJob extension</a> to provide customizable limits on the number of jobs enqueued or executed concurrently. Rails might upstream it too. Here’s how to configure it:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># app/jobs/my_job.rb</span>
<span class="k">class</span> <span class="nc">MyJob</span> <span class="o">&lt;</span> <span class="no">ApplicationJob</span>
  <span class="kp">include</span> <span class="no">GoodJob</span><span class="o">::</span><span class="no">ActiveJobExtensions</span><span class="o">::</span><span class="no">Concurrency</span>

  <span class="n">good_job_control_concurrency_with</span><span class="p">(</span>
    <span class="c1"># Maximum number of jobs with the concurrency key to be concurrently enqueued</span>
    <span class="ss">enqueue_limit: </span><span class="mi">2</span><span class="p">,</span>

    <span class="c1"># Maximum number of jobs with the concurrency key to be concurrently performed</span>
    <span class="ss">perform_limit: </span><span class="mi">1</span><span class="p">,</span>

    <span class="c1"># A unique key to be globally locked against.</span>
    <span class="c1"># Can be String or Lambda/Proc that is invoked in the context of the job.</span>
    <span class="c1"># Note: Arguments passed to #perform_later must be accessed through `arguments` method.</span>
    <span class="ss">key: </span><span class="o">-&gt;</span> <span class="p">{</span> <span class="s2">"Unique-</span><span class="si">#{</span><span class="n">arguments</span><span class="p">.</span><span class="nf">first</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span> <span class="c1">#  MyJob.perform_later("Alice") =&gt; "Unique-Alice"</span>
  <span class="p">)</span>

  <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="n">first_name</span><span class="p">)</span>
    <span class="c1"># do work</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="dashboard-demo">Dashboard Demo</h3>

<p>Don’t take my word for what a good job it is. Check out the new GoodJob Dashboard demo running on Heroku entirely within a single free dyno: https://goodjob-demo.herokuapp.com/</p>

<h3 id="more-news">More news:</h3>

<ul>
  <li>Wojciech Wnętrzak aka <a href="https://github.com/morgoth">@morgoth</a> became a GoodJob maintainer.</li>
  <li>Wrote up details of the <a href="https://github.com/bensheldon/good_job/issues/255">evolving development philosophy</a> behind GoodJob.</li>
  <li>The Dashboard now allows removing jobs, with more actions coming soon.</li>
</ul>

<h3 id="contribute">Contribute</h3>

<p>Code, documentation, and curiosity-based contributions are welcome! Check out the  <a href="https://github.com/bensheldon/good_job/projects/1">GoodJob Backlog</a> , comment on or open a Github Issue, or make a Pull Request.</p>

<p>I also have a  <a href="https://github.com/sponsors/bensheldon">GitHub Sponsors Profile</a>  if you’re able to support GoodJob and me monetarily. It helps me stay in touch and send you project updates too.</p>


  </div>
</article>

    

    <hr>
  
    
      

<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">
      <a class="post-link" href="/2021/07/paranoid-and-reparative-readings"><p>Paranoid and Reparative readings</p>
</a>
    </h1>
    <p class="post-meta text-muted">
      <time datetime="2021-07-05T17:19:00+00:00" itemprop="datePublished">July 5, 2021</time>
      
      



    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>From <a href="https://www.vox.com/the-highlight/22543858/isabel-fall-attack-helicopter"><em>How Twitter can ruin a life: Isabel Fall’s sci-fi story “I Sexually Identify as an Attack Helicopter” drew the ire of the internet</em></a>:</p>

<blockquote>
  <p>The delineation between paranoid and reparative readings originated in 1995, with influential critic Eve Kosofsky Sedgwick. A paranoid reading focuses on what’s wrong or problematic about a work of art. A reparative reading seeks out what might be nourishing or healing in a work of art, even if the work is flawed. Importantly, a reparative reading also tends to consider what might be nourishing or healing in a work of art for someone who isn’t the reader.</p>
</blockquote>

  </div>
</article>

    

    
  

  
<hr>


<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    
      <li class="page-item"><a href="/page/7/" class="page-link"><span aria-hidden="true">&larr; </span>Newer</a></li>
    

    <li class="page-item disabled"><span class="page-link">Page 8 of 68</span></li>

    
      <li class="page-item"><a href="/page/9/" class="page-link">Older<span aria-hidden="true"> &rarr;</span></a></li>
    
  </ul>
</nav>



</div>

    </div>

    <footer class="site-footer">

</footer>


  </body>

</html>
